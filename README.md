# Record management API using .net core and liteDB

This API allow to manage records of person, those record hold name, company, profile image, email, birthdate, phone number (work, personal) and address. 

A noSQL database is used, so the record are just json objects with a key, in this case the key is a integer that auto generated when a record is added.

The image are stored separately in the fileStorage, there name are the index of the record they are linked to. As of now if you want a record and the image you need to do two calls, one for the record and one for the image.

Other than that, this is very basic and allow to create, read, update, delete the records. They can be searched by id, but also email and phone number. If two records use the same phone number or email it will retrieve both.

### Docker image

The docker image is available on dockerhub and can be pulled using this command
docker pull vhetet/recordmanagementapi

It's using docker for Windows 

To run it use this command

`docker run -d -p 1234:80 --name test recordmanagementapi:latest`

Then access 
http://localhost:1234/api/values

### Endpoints

Id are just integer that are autogenerated by liteDB

##### Records

* GET api/values/ ==> view all records
* GET api/values/id ==> view record by id
* GET api/values/phoneNumber ==> view record by phone number
* GET api/values/email ==> view record by email
* POST api/values ==> add record using this json format in the body of the post request
```
{
    "name": "John Doe",
    "company": "Chicken and co",
    "email": "john@chickenandco.com",
    "birthDate": "0001-01-01T00:00:00", // birthDate is expected to be in this format, no other formats are supported
    "phoneNumberProfessional": "3123123123",
    "phoneNumberPersonal": null,
    "address": null,
    "hasImage": false
}
```
* PUT api/values/id ==> update record using the same object
* DELETE api/values/id ==> delete a record

##### Images

* GET api/values/image/id ==> view image by id
* POST api/values/image/id ==> add image by passing it in the body of the post request, there is no validation done on the file type
* PUT ==> does not exist as the post will update an image is there already one at the specified id
* DELETE api/values/image/id ==> delete an image

##### Examples

see the http_request_example.md 

### Why doing it like that

The point of this project is to experiment with new framework I have not got the opportunity to work with yet, such as .net core, docker and liteDB. This is also the opportunity to build an API, I have often used API but I never built one.

### language and framework used:
* .net core 2.0
* c#
* docker
* liteDB
* MSTest

### State of the project

As of now this project is largely incomplete and lacks a lot of elements:
* there is no data validation, as of now it's just assumed that the users will never make mistakes... (I am being really optimistic :) )
* it's barely tested
* it has not been deployed anywhere beside my local environment, but I plan to use azure for that. Also the point of using docker waht to make it easy to deploy so I need to look at that in details.
* The image download is not working as of now

### Other infos

This was developed with the latest update of VS2017 (15.6) and the latest version of docker for windows (18.03.0).
I also used postman to test the endpoints manually

### resource used

http://www.litedb.org/

https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-web-api
